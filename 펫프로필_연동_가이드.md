# ğŸ¾ í« í”„ë¡œí•„ ë“±ë¡ í”„ë¡ íŠ¸-ë°±ì—”ë“œ ì—°ê²° ê°€ì´ë“œ (ì´ë¯¸ì§€ ì œì™¸)

## ğŸ“‹ í˜„ì¬ ìƒíƒœ ë¶„ì„

### ë°±ì—”ë“œ API
- **ì—”ë“œí¬ì¸íŠ¸:** `POST /api/v1/pets`
- **í•„ìˆ˜ í•„ë“œ:**
  - `userId` (Long) - ì‚¬ìš©ì ID
  - `species` (String) - "DOG" ë˜ëŠ” "CAT"
  - `birthdate` (LocalDate) - "yyyy-MM-dd" í˜•ì‹
  - `weight` (BigDecimal) - ëª¸ë¬´ê²Œ
  - `abitTypeCode` (String) - MBTI í˜•ì‹ (ì˜ˆ: "ISTJ")
  - `name` (String) - í« ì´ë¦„
- **ì„ íƒ í•„ë“œ:**
  - `imageUrl` (String) - ì´ë¯¸ì§€ URL (ë‚˜ì¤‘ì— êµ¬í˜„)

### í”„ë¡ íŠ¸ì—”ë“œ í˜„ì¬ ë°ì´í„°
- í« ì´ë¦„, ìƒë…„ì›”ì¼, í’ˆì¢…, ì§ˆí™˜, ì„±ë³„, ì¢…ë¥˜(ê°•ì•„ì§€/ê³ ì–‘ì´)

## ğŸ”§ ë‹¨ê³„ë³„ êµ¬í˜„ ê°€ì´ë“œ

### **Step 1: Pet Service ìƒì„±í•˜ê¸°**

ë¨¼ì € `lib/services/` í´ë”ì— `pet_service.dart` íŒŒì¼ì„ ë§Œë“œì„¸ìš”.

```dart
// lib/services/pet_service.dart
import 'dart:convert';
import 'package:http/http.dart' as http;

class PetService {
  static final PetService _instance = PetService._internal();
  factory PetService() => _instance;
  PetService._internal();

  static const String baseUrl = "http://10.0.2.2:9075/api/v1/pets";

  /// í« í”„ë¡œí•„ ë“±ë¡ API í˜¸ì¶œ
  Future<Map<String, dynamic>> createPet({
    required int userId,
    required String name,
    required String species,      // "DOG" ë˜ëŠ” "CAT"
    required String birthdate,    // "yyyy-MM-dd" í˜•ì‹
    required double weight,       // ëª¸ë¬´ê²Œ (kg)
    required String abitTypeCode, // MBTI ì½”ë“œ (ì˜ˆ: "ISTJ")
    String? imageUrl,             // ë‚˜ì¤‘ì— êµ¬í˜„
  }) async {
    final url = Uri.parse(baseUrl);

    try {
      final response = await http.post(
        url,
        headers: {"Content-Type": "application/json"},
        body: jsonEncode({
          "userId": userId,
          "name": name,
          "species": species,
          "birthdate": birthdate,
          "weight": weight,
          "abitTypeCode": abitTypeCode,
          "imageUrl": imageUrl, // nullì´ë©´ ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬
        }),
      );

      if (response.statusCode == 201 || response.statusCode == 200) {
        final data = jsonDecode(response.body);
        if (data["ok"] == true) {
          return {
            "success": true,
            "message": "í« í”„ë¡œí•„ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.",
            "petId": data["data"]["id"],
          };
        } else {
          return {
            "success": false,
            "message": data["message"] ?? "í« í”„ë¡œí•„ ë“±ë¡ ì‹¤íŒ¨"
          };
        }
      } else {
        final errorData = jsonDecode(response.body);
        return {
          "success": false,
          "message": errorData["message"] ?? "ì„œë²„ ì˜¤ë¥˜ (${response.statusCode})"
        };
      }
    } catch (e) {
      return {"success": false, "message": "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e"};
    }
  }

  /// ì‚¬ìš©ìì˜ í« ëª©ë¡ ì¡°íšŒ
  Future<Map<String, dynamic>> getPetsByOwner(int userId) async {
    try {
      final response = await http.get(
        Uri.parse('$baseUrl?ownerId=$userId'),
        headers: {"Content-Type": "application/json"},
      );

      if (response.statusCode == 200) {
        final data = jsonDecode(response.body);
        if (data["ok"] == true) {
          return {
            "success": true,
            "pets": data["data"] as List,
          };
        } else {
          return {"success": false, "message": data["message"]};
        }
      } else {
        return {"success": false, "message": "ì¡°íšŒ ì‹¤íŒ¨ (${response.statusCode})"};
      }
    } catch (e) {
      return {"success": false, "message": "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e"};
    }
  }
}
```

---

### **Step 2: add_pet_profile_screen.dart ìˆ˜ì •í•˜ê¸°**

#### 2-1. Import ì¶”ê°€

ê¸°ì¡´ íŒŒì¼ì˜ ìƒë‹¨ì— importë¥¼ ì¶”ê°€í•˜ì„¸ìš”:

```dart
import '../services/pet_service.dart';
import '../services/auth_service.dart';
```

#### 2-2. ë“±ë¡ ë²„íŠ¼ ìˆ˜ì •

`_buildRegisterButton()` ë©”ì„œë“œì˜ `onPressed` ë¶€ë¶„ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì„¸ìš”:

```dart
/// í”„ë¡œí•„ ë“±ë¡ ë²„íŠ¼
Widget _buildRegisterButton() {
  return Container(
    width: double.infinity,
    padding: EdgeInsets.all(20),
    child: ElevatedButton(
      onPressed: () async {
        // === ì…ë ¥ê°’ ê²€ì¦ ===

        // 1. í« ì´ë¦„ í™•ì¸
        if (_nameController.text.trim().isEmpty) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('í« ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
              backgroundColor: Colors.red,
            ),
          );
          return;
        }

        // 2. í« ì¢…ë¥˜ í™•ì¸ (ê°•ì•„ì§€/ê³ ì–‘ì´)
        if (_selectedSpecies == null) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('í« ì¢…ë¥˜(ê°•ì•„ì§€/ê³ ì–‘ì´)ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.'),
              backgroundColor: Colors.red,
            ),
          );
          return;
        }

        // 3. ìƒë…„ì›”ì¼ í™•ì¸
        if (_birthdayController.text.trim().isEmpty) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
              backgroundColor: Colors.red,
            ),
          );
          return;
        }

        // 4. ì„±ë³„ í™•ì¸
        if (_selectedGender == null) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.'),
              backgroundColor: Colors.red,
            ),
          );
          return;
        }

        // === ë°±ì—”ë“œ API í˜¸ì¶œ ì¤€ë¹„ ===

        // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°
        final currentUser = AuthService().currentUser;
        if (currentUser == null) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.'),
              backgroundColor: Colors.red,
            ),
          );
          return;
        }

        // ì¢…ë¥˜ë¥¼ ë°±ì—”ë“œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ ("dog" -> "DOG")
        String species = _selectedSpecies!.toUpperCase();

        // ìƒë…„ì›”ì¼ì„ "yyyy-MM-dd" í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        String birthdate = _birthdayController.text.trim();
        // ì˜ˆ: "2020.03.15" -> "2020-03-15"ë¡œ ë³€í™˜
        if (birthdate.contains('.')) {
          birthdate = birthdate.replaceAll('.', '-');
        }

        // ì„ì‹œ ëª¸ë¬´ê²Œ (ë‚˜ì¤‘ì— ì…ë ¥ í•„ë“œ ì¶”ê°€ ê°€ëŠ¥)
        double weight = 5.0; // kg ë‹¨ìœ„

        // ì„ì‹œ ABTI ì½”ë“œ (ë‚˜ì¤‘ì— í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¡œ ë³€ê²½ ê°€ëŠ¥)
        String abitTypeCode = "ISTJ";

        // === ë°±ì—”ë“œ API í˜¸ì¶œ ===

        final result = await PetService().createPet(
          userId: int.parse(currentUser.id),
          name: _nameController.text.trim(),
          species: species,
          birthdate: birthdate,
          weight: weight,
          abitTypeCode: abitTypeCode,
          imageUrl: null, // ì´ë¯¸ì§€ëŠ” ë‚˜ì¤‘ì— êµ¬í˜„
        );

        if (!mounted) return;

        // === ê²°ê³¼ ì²˜ë¦¬ ===

        if (result['success']) {
          // ë¡œì»¬ í”„ë¡œí•„ ë§¤ë‹ˆì €ì—ë„ ì¶”ê°€ (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
          final profile = PetProfile(
            id: result['petId'].toString(),
            name: _nameController.text.trim(),
            imageUrl: _selectedImageUrl,
            birthday: _birthdayController.text.trim(),
            breed: _selectedBreed,
            disease: _selectedDisease,
            gender: _selectedGender,
          );

          PetProfileManager().addProfile(profile);

          // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('${profile.name} í”„ë¡œí•„ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!'),
              backgroundColor: const Color.fromARGB(255, 0, 108, 82),
            ),
          );

          // ì´ì „ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
          Navigator.pop(context, true);
        } else {
          // ì‹¤íŒ¨ ë©”ì‹œì§€ í‘œì‹œ
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text(result['message'] ?? 'ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'),
              backgroundColor: Colors.red,
            ),
          );
        }
      },
      style: ElevatedButton.styleFrom(
        backgroundColor: const Color.fromARGB(255, 0, 108, 82),
        padding: EdgeInsets.symmetric(vertical: 15),
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(8)),
      ),
      child: Text(
        'í”„ë¡œí•„ ë“±ë¡',
        style: TextStyle(
          fontSize: 16,
          fontWeight: FontWeight.bold,
          color: Colors.white,
        ),
      ),
    ),
  );
}
```

---

### **Step 3: (ì„ íƒì‚¬í•­) ëª¸ë¬´ê²Œ ì…ë ¥ í•„ë“œ ì¶”ê°€í•˜ê¸°**

ëª¸ë¬´ê²Œë¥¼ ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥í•˜ë„ë¡ í•˜ë ¤ë©´:

#### 3-1. ì»¨íŠ¸ë¡¤ëŸ¬ ì¶”ê°€

í´ë˜ìŠ¤ ìƒë‹¨ì— ì¶”ê°€:
```dart
final TextEditingController _weightController = TextEditingController();
```

#### 3-2. dispose ë©”ì„œë“œì— ì¶”ê°€

```dart
@override
void dispose() {
  _nameController.dispose();
  _birthdayController.dispose();
  _breedController.dispose();
  _diseaseController.dispose();
  _weightController.dispose(); // ì¶”ê°€
  super.dispose();
}
```

#### 3-3. ì…ë ¥ í•„ë“œ ì¶”ê°€

ì§ˆí™˜ ë“œë¡­ë‹¤ìš´ ë‹¤ìŒì— ì¶”ê°€:
```dart
SizedBox(height: 12),
_buildInputField('í« ëª¸ë¬´ê²Œ (kg)', _weightController),
```

#### 3-4. ë“±ë¡ ë²„íŠ¼ì—ì„œ ì‚¬ìš©

```dart
// ê¸°ì¡´: double weight = 5.0;
// ë³€ê²½:
double weight = double.tryParse(_weightController.text.trim()) ?? 5.0;
```

---

### **Step 4: (ì„ íƒì‚¬í•­) ABTI í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—°ë™**

ABTI í…ŒìŠ¤íŠ¸ í™”ë©´ì—ì„œ ê²°ê³¼ë¥¼ ë°›ì•„ì˜¤ë ¤ë©´:

#### 4-1. í´ë˜ìŠ¤ ë³€ìˆ˜ ì¶”ê°€

```dart
String? _abitResult; // ABTI í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥
```

#### 4-2. ABTI í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì¶”ê°€

í”„ë¡œí•„ ë“±ë¡ í™”ë©´ì— ë²„íŠ¼ ì¶”ê°€:
```dart
SizedBox(height: 20),
ElevatedButton(
  onPressed: () async {
    final result = await Navigator.push(
      context,
      MaterialPageRoute(builder: (context) => AbtiTestScreen()),
    );
    if (result != null) {
      setState(() {
        _abitResult = result;
      });
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text('ABTI í…ŒìŠ¤íŠ¸ ì™„ë£Œ: $result'),
          backgroundColor: const Color.fromARGB(255, 0, 108, 82),
        ),
      );
    }
  },
  style: ElevatedButton.styleFrom(
    backgroundColor: Colors.white,
    foregroundColor: const Color.fromARGB(255, 0, 108, 82),
  ),
  child: Text('ABTI í…ŒìŠ¤íŠ¸ í•˜ê¸°'),
)
```

#### 4-3. ë“±ë¡ ë²„íŠ¼ì—ì„œ ì‚¬ìš©

```dart
// ê¸°ì¡´: String abitTypeCode = "ISTJ";
// ë³€ê²½:
String abitTypeCode = _abitResult ?? "ISTJ"; // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë˜ëŠ” ê¸°ë³¸ê°’
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. **ë°±ì—”ë“œ ì‹¤í–‰ í™•ì¸**

```bash
cd backend/demo
./gradlew bootRun
```

ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¡œê·¸ê°€ í‘œì‹œë©ë‹ˆë‹¤:
```
Started DemoApplication in X.XXX seconds
```

### 2. **API í…ŒìŠ¤íŠ¸ (Postman ë˜ëŠ” curl)**

#### Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸:
- **URL:** `http://localhost:9075/api/v1/pets`
- **Method:** POST
- **Headers:** `Content-Type: application/json`
- **Body (JSON):**
```json
{
  "userId": 1,
  "name": "ë°”ë‘‘ì´",
  "species": "DOG",
  "birthdate": "2020-03-15",
  "weight": 5.5,
  "abitTypeCode": "ISTJ",
  "imageUrl": null
}
```

#### curlë¡œ í…ŒìŠ¤íŠ¸:
```bash
curl -X POST http://localhost:9075/api/v1/pets \
  -H "Content-Type: application/json" \
  -d '{
    "userId": 1,
    "name": "ë°”ë‘‘ì´",
    "species": "DOG",
    "birthdate": "2020-03-15",
    "weight": 5.5,
    "abitTypeCode": "ISTJ",
    "imageUrl": null
  }'
```

#### ì˜ˆìƒ ì‘ë‹µ:
```json
{
  "ok": true,
  "data": {
    "id": 1
  },
  "error": null,
  "message": null
}
```

### 3. **í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í…ŒìŠ¤íŠ¸**

#### í…ŒìŠ¤íŠ¸ ì ˆì°¨:
1. ì•± ì‹¤í–‰ (ì—ë®¬ë ˆì´í„° ë˜ëŠ” ì‹¤ì œ ê¸°ê¸°)
2. íšŒì›ê°€ì… ë˜ëŠ” ë¡œê·¸ì¸ ì™„ë£Œ
3. í« í”„ë¡œí•„ ë“±ë¡ í™”ë©´ ì§„ì…
4. ë‹¤ìŒ ì •ë³´ ì…ë ¥:
   - í« ì¢…ë¥˜ ì„ íƒ (ê°•ì•„ì§€/ê³ ì–‘ì´)
   - í« ì´ë¦„ ì…ë ¥
   - ìƒë…„ì›”ì¼ ì…ë ¥ (ì˜ˆ: 2020-03-15)
   - í’ˆì¢… ì„ íƒ
   - ì§ˆí™˜ ì„ íƒ
   - ì„±ë³„ ì„ íƒ
5. "í”„ë¡œí•„ ë“±ë¡" ë²„íŠ¼ í´ë¦­
6. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸

#### ë¡œê·¸ í™•ì¸:
Flutter ì½˜ì†”ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
I/flutter: API í˜¸ì¶œ ì„±ê³µ: {success: true, message: í« í”„ë¡œí•„ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤., petId: 1}
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### **1. 401 Unauthorized ì—ëŸ¬**
**ì¦ìƒ:** API í˜¸ì¶œ ì‹œ 401 ì—ëŸ¬ ë°œìƒ

**ì›ì¸:** Security ì„¤ì •ì—ì„œ ì¸ì¦ ìš”êµ¬

**í•´ê²°:** ì´ë¯¸ í•´ê²°ë¨ - `SecurityBeansConfig.java`ì—ì„œ `.anyRequest().permitAll()` ì„¤ì • í™•ì¸

---

### **2. 400 Bad Request ì—ëŸ¬**
**ì¦ìƒ:** API í˜¸ì¶œ ì‹œ 400 ì—ëŸ¬ ë° "í•„ìˆ˜ í•„ë“œ ëˆ„ë½" ë©”ì‹œì§€

**ì›ì¸:** í•„ìˆ˜ í•„ë“œ ëˆ„ë½ ë˜ëŠ” í˜•ì‹ ì˜¤ë¥˜

**í•´ê²° ë°©ë²•:**
- í•„ìˆ˜ í•„ë“œ í™•ì¸: `userId`, `name`, `species`, `birthdate`, `weight`, `abitTypeCode`
- ë°ì´í„° í˜•ì‹ í™•ì¸:
  - `species`: "DOG" ë˜ëŠ” "CAT" (ëŒ€ë¬¸ì)
  - `birthdate`: "yyyy-MM-dd" í˜•ì‹ (ì˜ˆ: "2020-03-15")
  - `weight`: ìˆ«ì (ì˜ˆ: 5.5)
  - `abitTypeCode`: ìœ íš¨í•œ MBTI ì½”ë“œ (ì˜ˆ: "ISTJ")

---

### **3. "ë‚ ì§œ í˜•ì‹ ì˜¤ë¥˜" ì—ëŸ¬**
**ì¦ìƒ:** `birthdate` ê´€ë ¨ 400 ì—ëŸ¬

**ì›ì¸:** ë‚ ì§œ í˜•ì‹ì´ "yyyy-MM-dd"ê°€ ì•„ë‹˜

**í•´ê²° ë°©ë²•:**
```dart
// "2020.03.15" -> "2020-03-15" ë³€í™˜
String birthdate = _birthdayController.text.trim();
if (birthdate.contains('.')) {
  birthdate = birthdate.replaceAll('.', '-');
}
```

---

### **4. "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜" ì—ëŸ¬**
**ì¦ìƒ:** `SocketException` ë˜ëŠ” ì—°ê²° ì‹¤íŒ¨

**ì›ì¸:**
- ë°±ì—”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
- ì˜ëª»ëœ URL

**í•´ê²° ë°©ë²•:**
1. ë°±ì—”ë“œ ì‹¤í–‰ í™•ì¸:
   ```bash
   cd backend/demo
   ./gradlew bootRun
   ```

2. URL í™•ì¸:
   - **Android ì—ë®¬ë ˆì´í„°:** `http://10.0.2.2:9075`
   - **ì‹¤ì œ ê¸°ê¸° (ê°™ì€ Wi-Fi):** `http://[PC-IPì£¼ì†Œ]:9075`
     - PC IP ì£¼ì†Œ í™•ì¸ (Windows): `ipconfig`
     - PC IP ì£¼ì†Œ í™•ì¸ (Mac/Linux): `ifconfig`

3. ë°©í™”ë²½ í™•ì¸:
   - Windows Defender ë°©í™”ë²½ì—ì„œ í¬íŠ¸ 9075 í—ˆìš©

---

### **5. "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤" ì—ëŸ¬**
**ì¦ìƒ:** í« í”„ë¡œí•„ ë“±ë¡ ì‹œ "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤" ë©”ì‹œì§€

**ì›ì¸:** `AuthService().currentUser`ê°€ null

**í•´ê²° ë°©ë²•:**
1. ë¡œê·¸ì¸ í™•ì¸:
   - íšŒì›ê°€ì… í›„ ë¡œê·¸ì¸ ì™„ë£Œí–ˆëŠ”ì§€ í™•ì¸
   - ë¡œê·¸ì¸ ì„±ê³µ í›„ `AuthService`ì— ì‚¬ìš©ì ì •ë³´ê°€ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸

2. ë””ë²„ê¹…:
   ```dart
   final currentUser = AuthService().currentUser;
   print('í˜„ì¬ ì‚¬ìš©ì: $currentUser'); // ë””ë²„ê¹…ìš©
   ```

---

### **6. userId ê´€ë ¨ ì—ëŸ¬**
**ì¦ìƒ:** `int.parse(currentUser.id)` ì—ëŸ¬

**ì›ì¸:** `currentUser.id`ê°€ ìˆ«ì í˜•ì‹ì´ ì•„ë‹˜

**í•´ê²° ë°©ë²•:**
```dart
// ì•ˆì „í•œ ë³€í™˜
int userId = int.tryParse(currentUser.id) ?? 0;
if (userId == 0) {
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(
      content: Text('ìœ íš¨í•˜ì§€ ì•Šì€ ì‚¬ìš©ì IDì…ë‹ˆë‹¤.'),
      backgroundColor: Colors.red,
    ),
  );
  return;
}
```

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„ (ë‚˜ì¤‘ì— êµ¬í˜„)

### **1. ì´ë¯¸ì§€ ì—…ë¡œë“œ**

#### í•„ìš”í•œ ì‘ì—…:
- **í”„ë¡ íŠ¸ì—”ë“œ:**
  - `image_picker` íŒ¨í‚¤ì§€ ì„¤ì¹˜
  - ì´ë¯¸ì§€ ì„ íƒ ê¸°ëŠ¥ êµ¬í˜„
  - ì´ë¯¸ì§€ë¥¼ Base64 ë˜ëŠ” FormDataë¡œ ë³€í™˜

- **ë°±ì—”ë“œ:**
  - íŒŒì¼ ì—…ë¡œë“œ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ (`POST /api/v1/upload`)
  - S3 ë˜ëŠ” ë¡œì»¬ ì €ì¥ì†Œ ì—°ë™
  - ì´ë¯¸ì§€ URL ë°˜í™˜

#### ì˜ˆì‹œ ì½”ë“œ (í”„ë¡ íŠ¸ì—”ë“œ):
```dart
import 'package:image_picker/image_picker.dart';

Future<void> _pickImage() async {
  final picker = ImagePicker();
  final pickedFile = await picker.pickImage(source: ImageSource.gallery);

  if (pickedFile != null) {
    // ì´ë¯¸ì§€ ì—…ë¡œë“œ API í˜¸ì¶œ
    String? imageUrl = await uploadImage(pickedFile);
    setState(() {
      _selectedImageUrl = imageUrl;
    });
  }
}
```

---

### **2. í’ˆì¢… ì •ë³´ ë°±ì—”ë“œ ì €ì¥**

#### í•„ìš”í•œ ì‘ì—…:
- `PetCreateReq`ì— `breed` í•„ë“œ ì¶”ê°€:
  ```java
  @Size(max = 50, message = "breedëŠ” ìµœëŒ€ 50ìì…ë‹ˆë‹¤.")
  String breed,
  ```

- `Pet` ì—”í‹°í‹°ì— `breed` ì»¬ëŸ¼ ì¶”ê°€
- ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

---

### **3. ì§ˆí™˜ ì •ë³´ ë°±ì—”ë“œ ì €ì¥**

#### í•„ìš”í•œ ì‘ì—…:
- **Option 1: ë‹¨ì¼ ì§ˆí™˜ ì €ì¥**
  - `PetCreateReq`ì— `disease` í•„ë“œ ì¶”ê°€

- **Option 2: ì—¬ëŸ¬ ì§ˆí™˜ ì €ì¥ (ê¶Œì¥)**
  - `pet_diseases` í…Œì´ë¸” ìƒì„± (ë‹¤ëŒ€ë‹¤ ê´€ê³„)
  - ì§ˆí™˜ ëª©ë¡ ì—”í‹°í‹° ë° ê´€ê³„ ì„¤ì •

#### ì˜ˆì‹œ (ë‹¨ì¼ ì§ˆí™˜):
```java
@Size(max = 100, message = "diseaseëŠ” ìµœëŒ€ 100ìì…ë‹ˆë‹¤.")
String disease,
```

---

### **4. í« ëª©ë¡ ì¡°íšŒ í™”ë©´ êµ¬í˜„**

#### í•„ìš”í•œ ì‘ì—…:
- ì‚¬ìš©ìì˜ í« ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” í™”ë©´ ì¶”ê°€
- `PetService().getPetsByOwner(userId)` í™œìš©
- í« ì¹´ë“œ UI êµ¬í˜„

#### ì˜ˆì‹œ ì½”ë“œ:
```dart
Future<void> _loadPets() async {
  final currentUser = AuthService().currentUser;
  if (currentUser != null) {
    final result = await PetService().getPetsByOwner(int.parse(currentUser.id));
    if (result['success']) {
      setState(() {
        _pets = result['pets'];
      });
    }
  }
}
```

---

### **5. í« í”„ë¡œí•„ ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥**

#### í•„ìš”í•œ ì‘ì—…:
- **ë°±ì—”ë“œ:**
  - `PUT /api/v1/pets/{id}` - ìˆ˜ì •
  - `DELETE /api/v1/pets/{id}` - ì‚­ì œ

- **í”„ë¡ íŠ¸ì—”ë“œ:**
  - ìˆ˜ì • í™”ë©´ êµ¬í˜„
  - ì‚­ì œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸

---

## ğŸ“š ì°¸ê³  ìë£Œ

### API ëª…ì„¸
- **íšŒì›ê°€ì…:** `POST /api/v1/users`
- **ë¡œê·¸ì¸:** `POST /api/v1/users/login`
- **ì´ë©”ì¼ ì¤‘ë³µí™•ì¸:** `GET /api/v1/users/check-email?email={email}`
- **í« í”„ë¡œí•„ ë“±ë¡:** `POST /api/v1/pets`
- **í« ëª©ë¡ ì¡°íšŒ:** `GET /api/v1/pets?ownerId={userId}`

### ë°ì´í„° í˜•ì‹
- **ë‚ ì§œ:** `yyyy-MM-dd` (ì˜ˆ: 2020-03-15)
- **í« ì¢…ë¥˜:** `DOG`, `CAT` (ëŒ€ë¬¸ì)
- **ABTI ì½”ë“œ:** MBTI 16ê°€ì§€ ìœ í˜• (ì˜ˆ: ISTJ, ENFP)
- **ëª¸ë¬´ê²Œ:** ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€ (ì˜ˆ: 5.5)

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

êµ¬í˜„ ì „ì— í™•ì¸í•˜ì„¸ìš”:

- [ ] ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì¤‘ (`./gradlew bootRun`)
- [ ] Security ì„¤ì •ì—ì„œ ëª¨ë“  ìš”ì²­ í—ˆìš© í™•ì¸ (`.anyRequest().permitAll()`)
- [ ] `pet_service.dart` íŒŒì¼ ìƒì„± ì™„ë£Œ
- [ ] `add_pet_profile_screen.dart`ì— import ì¶”ê°€
- [ ] ë“±ë¡ ë²„íŠ¼ì˜ `onPressed` ë¡œì§ ìˆ˜ì • ì™„ë£Œ
- [ ] ë¡œê·¸ì¸ ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸
- [ ] ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸ (ì—ë®¬ë ˆì´í„°/ì‹¤ì œ ê¸°ê¸°)

---

## ğŸ‰ ì™„ë£Œ!

ì´ì œ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ì œì™¸í•œ í« í”„ë¡œí•„ ë“±ë¡ ê¸°ëŠ¥ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!

ë¬¸ì œê°€ ë°œìƒí•˜ë©´:
1. ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
2. ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸ (`backend/backend_final.log`)
3. Flutter ì½˜ì†” ë¡œê·¸ í™•ì¸
4. ìœ„ì˜ "ë¬¸ì œ í•´ê²°" ì„¹ì…˜ ì°¸ê³ 

ì¶”ê°€ ì§ˆë¬¸ì´ë‚˜ ë¬¸ì œê°€ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ ë¬¼ì–´ë³´ì„¸ìš”! ğŸš€
